/*!
 * @author yomotsu / http://yomotsu.net/
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.GLSlideshow=e()}}(function(){return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return r(n?n:e)},f,f.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});/*!
 * @author mrdoob / http://mrdoob.com/
 */
var i=function(){};i.prototype={constructor:i,apply:function(e){e.addEventListener=i.prototype.addEventListener,e.hasEventListener=i.prototype.hasEventListener,e.removeEventListener=i.prototype.removeEventListener,e.dispatchEvent=i.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,i=n[e];if(void 0!==i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var i=[],r=n.length,o=0;r>o;o++)i[o]=n[o];for(var o=0;r>o;o++)i[o].call(this,e)}}}},n["default"]=i,t.exports=n["default"]},{}],2:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./EventDispatcher.js"),o=(i(r),e("./WebGLRenderer.js")),s=i(o),a=e("./shaderLib.js"),l=i(a),u={hasCanvas:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),hasWebGL:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}(),WebGLRenderer:s["default"],shaderLib:l["default"]};n["default"]=u,t.exports=n["default"]},{"./EventDispatcher.js":1,"./WebGLRenderer.js":4,"./shaderLib.js":6}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(t,n){i(this,e);var r=this;this.count=0,this.startTime=Date.now(),this.elapsedTime=0,this.isRunning=!0,this.isAnimating=!1,this.duration=n&&n.duration||1e3,this.interval=Math.max(n&&n.interval||5e3,this.duration),this.isUpdated=!0,this.domElement=document.createElement("canvas"),this.images=[],t.forEach(function(e,t){r.insert(e,t)})}return r(e,[{key:"transition",value:function(e){this.from.setImage(this.images[this.count]),this.to.setImage(this.images[e]),this.transitionStartTime=Date.now(),this.startTime=Date.now(),this.count=e,this.isAnimating=!0,this.isUpdated=!0}},{key:"setSize",value:function(e,t){this.domElement.width=e,this.domElement.height=t,this.isUpdated=!0}},{key:"tick",value:function(){var e=0;this.isRunning&&(this.elapsedTime=Date.now()-this.startTime),this.interval<this.elapsedTime&&(e=this.getNext(),this.transition(e)),requestAnimationFrame(this.tick.bind(this)),(this.isUpdated||this.isAnimating)&&this.render()}},{key:"render",value:function(){}},{key:"play",value:function(){var e=0;return this.isRunning?this:(e=Date.now()-this.pauseStartTime,this.startTime+=e,this.isRunning=!0,delete this._pauseStartTime,this)}},{key:"pause",value:function(){return this.isRunning?(this.isRunning=!1,this.pauseStartTime=Date.now(),this):this}},{key:"getNext",value:function(){return this.count<this.images.length-1?this.count+1:0}},{key:"insert",value:function(e,t){var n;if(e instanceof Image);else{if("string"!=typeof e)return;n=e,e=new Image,e.src=n}this.images.splice(t,0,e)}},{key:"remove",value:function(e){1!==this.images.length&&this.images.splice(e,1)}}]),e}();n["default"]=o,t.exports=n["default"]},{}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:m(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)};Object.defineProperty(n,"__esModule",{value:!0});var u=e("./Renderer.js"),f=i(u),h=e("./WebGLTexture.js"),c=i(h),d="\nattribute vec2 position;\nvoid main(){\n	gl_Position = vec4( position, 1., 1. );\n}\n",g=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i.gl=i.domElement.getContext("webgl")||i.domElement.getContext("experimental-webgl"),i.resolution=new Float32Array([n&&n.width||i.domElement.width,n&&n.height||i.domElement.height]),i.vertexShader=i.gl.createShader(i.gl.VERTEX_SHADER),i.gl.shaderSource(i.vertexShader,d),i.gl.compileShader(i.vertexShader),i.setShaderProgram(n&&n.shader||"crossFade"),i.tick(),i}return s(t,e),a(t,[{key:"setShaderProgram",value:function(e,t){var n,i=0,r=GLSlideshow.shaderLib[e].source,o=GLSlideshow.shaderLib[e].uniforms;this.program&&(this.from.image.removeEventListener(this.from.onload),this.to.image.removeEventListener(this.to.onload),this.gl.deleteTexture(this.from.texture),this.gl.deleteTexture(this.to.texture),this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteShader(this.fragmentShader),this.gl.deleteProgram(this.program)),this.fragmentShader=this.gl.createShader(this.gl.FRAGMENT_SHADER),this.gl.shaderSource(this.fragmentShader,r),this.gl.compileShader(this.fragmentShader),this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),this.vertexBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),this.gl.STATIC_DRAW),n=this.gl.getAttribLocation(this.program,"position"),this.gl.vertexAttribPointer(n,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(n),this.uniforms={progress:this.gl.getUniformLocation(this.program,"progress"),resolution:this.gl.getUniformLocation(this.program,"resolution"),from:this.gl.getUniformLocation(this.program,"from"),to:this.gl.getUniformLocation(this.program,"to")};for(i in o)this.uniforms[i]=this.gl.getUniformLocation(this.program,i),this.setUnifrom(i,o[i].value,o[i].type);this.from=new c["default"](this.gl,this.images[this.count]),this.to=new c["default"](this.gl,this.images[this.getNext()]),this.from.addEventListener("updated",this.updateWebGLTexture.bind(this)),this.to.addEventListener("updated",this.updateWebGLTexture.bind(this)),this.setSize(this.resolution[0],this.resolution[1]),this.updateWebGLTexture()}},{key:"setUnifrom",value:function(e,t,n){var i=this.gl.getUniformLocation(this.program,e);"float"===n&&this.gl.uniform1f(i,t)}},{key:"updateWebGLTexture",value:function(){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.from.texture),this.gl.uniform1i(this.uniforms.from,0),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.to.texture),this.gl.uniform1i(this.uniforms.to,1),this.isUpdated=!0}},{key:"setSize",value:function(e,n){l(Object.getPrototypeOf(t.prototype),"setSize",this).call(this,e,n),this.resolution[0]=e,this.resolution[1]=n,this.gl.viewport(0,0,e,n),this.gl.uniform2fv(this.uniforms.resolution,this.resolution),this.isUpdated=!0}},{key:"render",value:function(){var e=0,t=0;this.isAnimating&&(e=Date.now()-this.transitionStartTime,t=this.isAnimating?Math.min(e/this.duration,1):0,1===t&&(this.isAnimating=!1)),this.gl.uniform1f(this.uniforms.progress,t),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.flush(),this.isUpdated=!1}},{key:"dispose",value:function(){this.isRunning=!1,this.isAnimating=!1,this.from.image.removeEventListener(this.from.onload),this.to.image.removeEventListener(this.to.onload),this.tick=function(){},this.program&&(this.gl.deleteTexture(this.from.texture),this.gl.deleteTexture(this.to.texture),this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),this.gl.deleteProgram(this.program))}}]),t}(f["default"]);n["default"]=g,t.exports=n["default"]},{"./Renderer.js":3,"./WebGLTexture.js":5}],5:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=e("./EventDispatcher.js"),a=i(s),l=document.createElement("canvas"),u=l.getContext("2d"),f=new Image;f.src="data:image/gif;base64,R0lGODlhAgACAPAAAP///wAAACwAAAAAAgACAEACAoRRADs=";var h=function(){function e(t,n){return r(this,e),this.gl=t,this.texture=t.createTexture(),this.setImage(n),this.onload=this.setImage.bind(this,this.image),this.image.addEventListener("load",this.onload),this}return o(e,[{key:"setImage",value:function(e){var t,n,i,r,o=this.gl,s=0!==e.naturalWidth;this.image=e,s?(n=e.naturalWidth,i=e.naturalHeight,r=Math.pow(2,Math.log(Math.max(n,i))/Math.LN2|0),l.height=l.width=r,u.drawImage(e,0,0,n,i,0,0,r,r),t=l):t=f,o.bindTexture(o.TEXTURE_2D,this.texture),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!0),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,t),o.generateMipmap(o.TEXTURE_2D),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_LINEAR),o.bindTexture(o.TEXTURE_2D,null),this.dispatchEvent({type:"updated"})}}]),e}();n["default"]=h,a["default"].prototype.apply(h.prototype),t.exports=n["default"]},{"./EventDispatcher.js":1}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={crossFade:{uniforms:{},source:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from, to;\nuniform float progress;\nuniform vec2 resolution;\n\nvoid main() {\n	vec2 p = gl_FragCoord.xy / resolution.xy;\n	// gl_FragColor =texture2D( from, p );\n	// gl_FragColor=texture2D( to, p );\n	gl_FragColor = mix( texture2D( from, p ), texture2D( to, p ), progress );\n\n}\n"},crossZoom:{uniforms:{strength:{value:.4,type:"float"}},source:"\n// Converted from https://github.com/rectalogic/rendermix-basic-effects/blob/master/assets/com/rendermix/CrossZoom/CrossZoom.frag\n// Which is based on https://github.com/evanw/glfx.js/blob/master/src/filters/blur/zoomblur.js\n// With additional easing functions from https://github.com/rectalogic/rendermix-basic-effects/blob/master/assets/com/rendermix/Easing/Easing.glsllib\n\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from, to;\nuniform float progress;\nuniform vec2 resolution;\n\nuniform float strength;\n\nconst float PI = 3.141592653589793;\n\nfloat Linear_ease(in float begin, in float change, in float duration, in float time) {\n		return change * time / duration + begin;\n}\n\nfloat Exponential_easeInOut(in float begin, in float change, in float duration, in float time) {\n		if (time == 0.0)\n				return begin;\n		else if (time == duration)\n				return begin + change;\n		time = time / (duration / 2.0);\n		if (time < 1.0)\n				return change / 2.0 * pow(2.0, 10.0 * (time - 1.0)) + begin;\n		return change / 2.0 * (-pow(2.0, -10.0 * (time - 1.0)) + 2.0) + begin;\n}\n\nfloat Sinusoidal_easeInOut(in float begin, in float change, in float duration, in float time) {\n		return -change / 2.0 * (cos(PI * time / duration) - 1.0) + begin;\n}\n\n/* random number between 0 and 1 */\nfloat random(in vec3 scale, in float seed) {\n		/* use the fragment position for randomness */\n		return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvec3 crossFade(in vec2 uv, in float dissolve) {\n		return mix(texture2D(from, uv).rgb, texture2D(to, uv).rgb, dissolve);\n}\n\nvoid main() {\n		vec2 texCoord = gl_FragCoord.xy / resolution.xy;\n		\n		// Linear interpolate center across center half of the image\n		vec2 center = vec2(Linear_ease(0.25, 0.5, 1.0, progress), 0.5);\n		float dissolve = Exponential_easeInOut(0.0, 1.0, 1.0, progress);\n		\n		// Mirrored sinusoidal loop. 0->strength then strength->0\n		float strength = Sinusoidal_easeInOut(0.0, strength, 0.5, progress);\n		\n		vec3 color = vec3(0.0);\n		float total = 0.0;\n		vec2 toCenter = center - texCoord;\n		\n		/* randomize the lookup values to hide the fixed number of samples */\n		float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n		\n		for (float t = 0.0; t <= 40.0; t++) {\n				float percent = (t + offset) / 40.0;\n				float weight = 4.0 * (percent - percent * percent);\n				color += crossFade(texCoord + toCenter * percent * strength, dissolve) * weight;\n				total += weight;\n		}\n		gl_FragColor = vec4(color / total, 1.0);\n}\n"},cube:{uniforms:{persp:{value:.7,type:"float"},unzoom:{value:.3,type:"float"},reflection:{value:.4,type:"float"},floating:{value:3,type:"float"}},source:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from, to;\nuniform float progress;\nuniform vec2 resolution;\n\nuniform float persp;\nuniform float unzoom;\nuniform float reflection;\nuniform float floating;\n\nvec2 project (vec2 p) {\n	return p * vec2(1.0, -1.2) + vec2(0.0, -floating/100.);\n}\n\nbool inBounds (vec2 p) {\n	return all(lessThan(vec2(0.0), p)) && all(lessThan(p, vec2(1.0)));\n}\n\nvec4 bgColor (vec2 p, vec2 pfr, vec2 pto) {\n	vec4 c = vec4(0.0, 0.0, 0.0, 1.0);\n	pfr = project(pfr);\n	if (inBounds(pfr)) {\n		c += mix(vec4(0.0), texture2D(from, pfr), reflection * mix(1.0, 0.0, pfr.y));\n	}\n	pto = project(pto);\n	if (inBounds(pto)) {\n		c += mix(vec4(0.0), texture2D(to, pto), reflection * mix(1.0, 0.0, pto.y));\n	}\n	return c;\n}\n\n// p : the position\n// persp : the perspective in [ 0, 1 ]\n// center : the xcenter in [0, 1]  0.5 excluded\nvec2 xskew (vec2 p, float persp, float center) {\n	float x = mix(p.x, 1.0-p.x, center);\n	return (\n		(\n			vec2( x, (p.y - 0.5*(1.0-persp) * x) / (1.0+(persp-1.0)*x) )\n			- vec2(0.5-distance(center, 0.5), 0.0)\n		)\n		* vec2(0.5 / distance(center, 0.5) * (center<0.5 ? 1.0 : -1.0), 1.0)\n		+ vec2(center<0.5 ? 0.0 : 1.0, 0.0)\n	);\n}\n\nvoid main() {\n	vec2 op = gl_FragCoord.xy / resolution.xy;\n	float uz = unzoom * 2.0*(0.5-distance(0.5, progress));\n	vec2 p = -uz*0.5+(1.0+uz) * op;\n	vec2 fromP = xskew(\n		(p - vec2(progress, 0.0)) / vec2(1.0-progress, 1.0),\n		1.0-mix(progress, 0.0, persp),\n		0.0\n	);\n	vec2 toP = xskew(\n		p / vec2(progress, 1.0),\n		mix(pow(progress, 2.0), 1.0, persp),\n		1.0\n	);\n	if (inBounds(fromP)) {\n		gl_FragColor = texture2D(from, fromP);\n	}\n	else if (inBounds(toP)) {\n		gl_FragColor = texture2D(to, toP);\n	}\n	else {\n		gl_FragColor = bgColor(op, fromP, toP);\n	}\n}\n"},wind:{uniforms:{size:{value:.2,type:"float"}},source:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n \n// General parameters\nuniform sampler2D from;\nuniform sampler2D to;\nuniform float progress;\nuniform vec2 resolution;\n \n// Custom parameters\nuniform float size;\n \nfloat rand (vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n \nvoid main() {\n  vec2 p = gl_FragCoord.xy / resolution.xy;\n  float r = rand(vec2(0, p.y));\n  float m = smoothstep(0.0, -size, p.x*(1.0-size) + size*r - (progress * (1.0 + size)));\n  gl_FragColor = mix(texture2D(from, p), texture2D(to, p), m);\n}\n"}},t.exports=n["default"]},{}]},{},[2])(2)});